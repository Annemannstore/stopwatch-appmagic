<!doctype html>
<html lang="ru">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –°–µ–∫—É–Ω–¥–æ–º–µ—Ä">
    <title>–°–µ–∫—É–Ω–¥–æ–º–µ—Ä</title>
    <style>
        /* –û–±—â–∏–µ —Å—Ç–∏–ª–∏ */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            height: 100vh;
            justify-content: space-between;
            align-items: center;
            background-color: #fff;
            color: #333;
            transition: background-color 0.3s, color 0.3s;
        }

        body.dark-mode {
            background-color: #333;
            color: #fff;
        }

        .stopwatch-container {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            flex-grow: 1;
        }

        .time {
            font-size: 48px;
            margin: 20px;
        }

        .start-stop,
        .reset {
            padding: 15px 30px;
            font-size: 18px;
            margin: 10px;
            border: none;
            cursor: pointer;
            border-radius: 50%;
            background-color: transparent;
            transition: background-color 0.3s, color 0.3s;
        }

        .start-stop {
            color: #007bff;
        }

        .start-stop.dark-mode {
            color: #ff5722;
        }

        .reset {
            color: #28a745;
        }

        .reset.dark-mode {
            color: #8bc34a;
        }

        .theme-toggle {
            position: absolute;
            top: 10px;
            left: 10px;
            background-color: transparent;
            border: none;
            color: #333;
            font-size: 18px;
            cursor: pointer;
            z-index: 10;
        }

        .theme-toggle.dark-mode {
            color: #fff;
        }

        /* –ù–∏–∂–Ω—è—è –ø–∞–Ω–µ–ª—å —Å –∫–Ω–æ–ø–∫–∞–º–∏ */
        .bottom-nav {
            display: flex;
            justify-content: space-around;
            padding: 10px;
            width: 100%;
            background-color: #f1f1f1;
            transition: background-color 0.3s;
        }

        .bottom-nav.dark-mode {
            background-color: #444;
        }

        .bottom-nav button {
            padding: 10px;
            font-size: 14px;
            background-color: transparent;
            border: none;
            cursor: pointer;
            color: #333;
        }

        .bottom-nav button.active {
            font-weight: bold;
            color: #007bff;
        }

        .bottom-nav button.dark-mode {
            color: #fff;
        }

        .bottom-nav button:not(.active).dark-mode {
            color: #fff;
        }

        .bottom-nav button:not(.active):not(.dark-mode) {
            color: #333;
        }

        /* –°—Ç–∏–ª—å –¥–ª—è —ç–∫—Ä–∞–Ω–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ */
        .settings-container {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            flex-grow: 1;
            background-color: #fff;
            color: #333;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            z-index: 5;
            display: none;
            transition: background-color 0.3s, color 0.3s;
        }

        .settings-container.dark-mode {
            background-color: #444;
            color: #fff;
        }

        .settings-container button {
            margin: 10px;
            padding: 10px 20px;
            font-size: 16px;
            border: none;
            cursor: pointer;
            border-radius: 5px;
        }

        .settings-container button.dark-mode {
            color: #fff;
            background-color: #333;
        }

        .settings-container button:not(.dark-mode) {
            background-color: #f1f1f1;
        }

        /* –ö–≤–∞–¥—Ä–∞—Ç–∏–∫–∏ –¥–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è —Ä–µ–∂–∏–º–∞ magic */
        .magic-toggle {
            width: 40px;
            height: 40px;
            border: 2px solid #007bff;
            border-radius: 8px;
            cursor: pointer;
            margin-top: 20px;
        }

        .magic-toggle.active {
            background-color: #007bff;
        }

        .magic-toggle.inactive {
            background-color: transparent;
        }

        /* –ü–æ–ª—è –¥–ª—è –≤—ã–±–æ—Ä–∞ –≤—Ä–µ–º–µ–Ω–∏ */
        .time-select {
            margin: 10px;
        }

        .time-select input,
        .time-select select {
            width: 80px;
            padding: 5px;
            font-size: 16px;
            text-align: center;
        }
    </style>
</head>
<body>
    <button class="theme-toggle">üåô</button>
    <div class="stopwatch-container">
        <div class="time">00:00:00:00</div>
        <div>
            <button class="start-stop">–°—Ç–∞—Ä—Ç</button>
            <button class="reset">–°–±—Ä–æ—Å</button>
        </div>
    </div>

    <div class="bottom-nav">
        <button class="alarm-btn">‚è∞ –ë—É–¥–∏–ª—å–Ω–∏–∫</button>
        <button>üïí –ß–∞—Å—ã</button>
        <button class="active">‚è± –°–µ–∫—É–Ω–¥–æ–º–µ—Ä</button>
        <button>‚è≤ –¢–∞–π–º–µ—Ä</button>
    </div>

    <!-- –≠–∫—Ä–∞–Ω –Ω–∞—Å—Ç—Ä–æ–µ–∫ -->
    <div class="settings-container">
        <h2>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</h2>
        <div>
            <label for="magic-toggle">–†–µ–∂–∏–º magic</label>
            <div id="magic-toggle" class="magic-toggle inactive"></div>
        </div>

        <!-- –í—ã–±–æ—Ä, –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –ª–∏ –Ω–∞ —Å–µ–∫—É–Ω–¥–µ –∏–ª–∏ —Ç–æ–ª—å–∫–æ –Ω–∞ –º–∏–ª–∏—Å–µ–∫—É–Ω–¥–µ -->
        <div>
            <label for="stop-mode">–†–µ–∂–∏–º –æ—Å—Ç–∞–Ω–æ–≤–∫–∏:</label>
            <select id="stop-mode">
                <option value="both">–°–µ–∫—É–Ω–¥–∞ –∏ –ú–∏–ª–∏—Å–µ–∫—É–Ω–¥–∞</option>
                <option value="milliseconds">–¢–æ–ª—å–∫–æ –ú–∏–ª–∏—Å–µ–∫—É–Ω–¥–∞</option>
            </select>
        </div>

        <!-- –ü–æ–ª—è –¥–ª—è –≤—ã–±–æ—Ä–∞ –≤—Ä–µ–º–µ–Ω–∏ -->
        <div class="time-select">
            <label for="stop-seconds">–°–µ–∫—É–Ω–¥–∞ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏:</label>
            <input type="number" id="stop-seconds" min="0" max="59" value="30" disabled />
        </div>
        <div class="time-select">
            <label for="stop-milliseconds">–ú–∏–ª–∏—Å–µ–∫—É–Ω–¥–∞ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏:</label>
            <input type="number" id="stop-milliseconds" min="1" max="59" value="50" disabled />
        </div>

        <!-- –ü–æ–ª—è –¥–ª—è –≤—ã–±–æ—Ä–∞ –Ω–∞–∂–∞—Ç–∏—è –∫–Ω–æ–ø–∫–∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ -->
        <div class="time-select">
            <label for="pause-click">–ù–∞–∂–∞—Ç–∏–µ –∫–Ω–æ–ø–∫–∏ –¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏:</label>
            <select id="pause-click" disabled>
                <option value="first">–ü–µ—Ä–≤–æ–µ –Ω–∞–∂–∞—Ç–∏–µ</option>
                <option value="second">–í—Ç–æ—Ä–æ–µ –Ω–∞–∂–∞—Ç–∏–µ</option>
                <option value="third">–¢—Ä–µ—Ç—å–µ –Ω–∞–∂–∞—Ç–∏–µ</option>
            </select>
        </div>

        <button class="close-settings">–ó–∞–∫—Ä—ã—Ç—å</button>
    </div>

    <script>
        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ç–µ–º—ã
        const themeToggleButton = document.querySelector('.theme-toggle');
        const body = document.body;
        const bottomNav = document.querySelector('.bottom-nav');
        
        themeToggleButton.addEventListener('click', () => {
            body.classList.toggle('dark-mode');
            bottomNav.classList.toggle('dark-mode');
            themeToggleButton.classList.toggle('dark-mode');
            themeToggleButton.textContent = body.classList.contains('dark-mode') ? 'üåï' : 'üåô';

            // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ü–≤–µ—Ç–∞ –∫–Ω–æ–ø–æ–∫ –≤ –Ω–∏–∂–Ω–µ–π –ø–∞–Ω–µ–ª–∏
            const bottomNavButtons = document.querySelectorAll('.bottom-nav button');
            bottomNavButtons.forEach(button => {
                if (button.classList.contains('active')) return;
                button.classList.toggle('dark-mode', body.classList.contains('dark-mode'));
            });
        });

        // –û—Ç–∫—Ä—ã—Ç–∏–µ —ç–∫—Ä–∞–Ω–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫
        const alarmButton = document.querySelector('.alarm-btn');
        const settingsContainer = document.querySelector('.settings-container');
        const closeSettingsButton = document.querySelector('.close-settings');
        
        alarmButton.addEventListener('click', () => {
            settingsContainer.style.display = 'flex';
        });

        closeSettingsButton.addEventListener('click', () => {
            settingsContainer.style.display = 'none';
        });

        // –†–µ–∂–∏–º Magic
        const magicToggleButton = document.getElementById('magic-toggle');
        const stopSecondsInput = document.getElementById('stop-seconds');
        const stopMillisecondsInput = document.getElementById('stop-milliseconds');
        const pauseClickSelect = document.getElementById('pause-click');
        const stopModeSelect = document.getElementById('stop-mode');
        let magicMode = false;

        magicToggleButton.addEventListener('click', () => {
            magicMode = !magicMode;
            magicToggleButton.classList.toggle('active', magicMode);
            magicToggleButton.classList.toggle('inactive', !magicMode);

            // –í–∫–ª—é—á–µ–Ω–∏–µ/–≤—ã–∫–ª—é—á–µ–Ω–∏–µ –ø–æ–ª–µ–π –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤—Ä–µ–º–µ–Ω–∏ –∏ —Ç–∏–ø–∞ –Ω–∞–∂–∞—Ç–∏—è
            stopSecondsInput.disabled = !magicMode || stopModeSelect.value === 'milliseconds';
            stopMillisecondsInput.disabled = !magicMode;
            pauseClickSelect.disabled = !magicMode;
        });

        // –õ–æ–≥–∏–∫–∞ —Å–µ–∫—É–Ω–¥–æ–º–µ—Ä–∞ —Å –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞–º–∏
        let timer;
        let time = 0; // –í—Ä–µ–º—è –≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö
        const timeDisplay = document.querySelector('.time');
        const startStopButton = document.querySelector('.start-stop');
        const resetButton = document.querySelector('.reset');
        
        let isRunning = false;
        let stopSeconds = 30; // –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
        let stopMilliseconds = 50; // –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
        let pauseClick = 'first'; // –¢–∏–ø –Ω–∞–∂–∞—Ç–∏—è –¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏
        let clickCount = 0; // –°—á—ë—Ç—á–∏–∫ –Ω–∞–∂–∞—Ç–∏–π

        function formatTime(ms) {
            let hours = Math.floor(ms / 3600000); // –ß–∞—Å—ã
            let minutes = Math.floor((ms % 3600000) / 60000); // –ú–∏–Ω—É—Ç—ã
            let seconds = Math.floor((ms % 60000) / 1000); // –°–µ–∫—É–Ω–¥—ã
            let milliseconds = Math.floor((ms % 1000) / 10); // –ú–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥—ã

            // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –∫–∞–∂–¥—ã–π —ç–ª–µ–º–µ–Ω—Ç –≤—Ä–µ–º–µ–Ω–∏ (—á–∞—Å—ã, –º–∏–Ω—É—Ç—ã, —Å–µ–∫—É–Ω–¥—ã) –∑–Ω–∞—á–µ–Ω–∏–µ–º –æ—Ç 00 –¥–æ 59
            hours = hours % 60;
            minutes = minutes % 60;
            seconds = seconds % 60;

            // –í–æ–∑–≤—Ä–∞—â–∞–µ–º —Ñ–æ—Ä–º–∞—Ç –≤—Ä–µ–º–µ–Ω–∏
            return `${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}:${String(milliseconds).padStart(2, '0')}`;
        }

        startStopButton.addEventListener('click', () => {
            if (isRunning) {
                clearInterval(timer);
                startStopButton.textContent = '–°—Ç–∞—Ä—Ç';
            } else {
                // –°–µ–∫—É–Ω–¥–æ–º–µ—Ä –æ—Ç—Å—á–∏—Ç—ã–≤–∞–µ—Ç —Å–µ–∫—É–Ω–¥—ã –∏ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥—ã
                const startTime = Date.now() - time; // –Ω–∞—á–∞–ª–æ –æ—Ç—Å—á–µ—Ç–∞ —Å —Ç–µ–∫—É—â–∏–º –≤—Ä–µ–º–µ–Ω–µ–º
                timer = setInterval(() => {
                    time = Date.now() - startTime; // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö
                    timeDisplay.textContent = formatTime(time);

                    // –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–µ–∫—É–Ω–¥–æ–º–µ—Ä–∞, –µ—Å–ª–∏ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω —Ä–µ–∂–∏–º magic
                    if (magicMode && (stopModeSelect.value === 'both' ? time >= stopSeconds * 1000 + stopMilliseconds : time >= stopMilliseconds)) {
                        clearInterval(timer);
                        startStopButton.textContent = '–°—Ç–∞—Ä—Ç';
                        isRunning = false;
                    }
                }, 10); // –û–±–Ω–æ–≤–ª—è–µ–º –∫–∞–∂–¥—É—é –¥–µ—Å—è—Ç—É—é –¥–æ–ª—é —Å–µ–∫—É–Ω–¥—ã
                startStopButton.textContent = '–ü–∞—É–∑–∞';
            }
            isRunning = !isRunning;
        });

        resetButton.addEventListener('click', () => {
            clearInterval(timer);
            time = 0;
            timeDisplay.textContent = formatTime(time);
            startStopButton.textContent = '–°—Ç–∞—Ä—Ç';
            isRunning = false;
        });
    </script>
</body>
</html>

